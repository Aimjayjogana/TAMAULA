{% extends "base.html" %}

{% block title %}Register Club - TAMAULA{% endblock %}

{% block content %}
<div class="form-container">
    <h2>Club Registration</h2>
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="name">Club Name *</label>
            <input type="text" id="name" name="name" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="local_government">Local Government *</label>
            <select id="local_government" name="local_government" class="form-control" required>
                <option value="">Select Local Government</option>
                {% for lg in local_governments %}
                    <option value="{{ lg }}">{{ lg }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" id="email" name="email" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" class="form-control">
        </div>
        
        <div class="form-group">
            <label for="logo">Club Logo</label>
            <input type="file" id="logo" name="logo" class="form-control" accept="image/*" data-preview="logoPreview">
            <img id="logoPreview" src="" alt="Logo Preview" style="max-width: 200px; display: none; margin-top: 10px; border-radius: 8px;">
            <small style="color: var(--gray); font-size: 0.8rem;">
                Optional: Upload your club logo (JPEG, PNG, WebP, max 5MB)
            </small>
        </div>
        
        <div class="form-group">
            <label for="password">Password *</label>
            <input type="password" id="password" name="password" class="form-control" required>
        </div>
        
        <button type="submit" class="btn">Register Club</button>
    </form>
    
    <p style="margin-top: 1rem;">Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
</div>

<script>
// Logo preview functionality
document.getElementById('logo').addEventListener('change', function() {
    const preview = document.getElementById('logoPreview');
    const file = this.files[0];
    
    if (file) {
        // Check file size (5MB limit)
        if (file.size > 5 * 1024 * 1024) {
            alert('File size must be less than 5MB');
            this.value = '';
            preview.style.display = 'none';
            return;
        }
        
        // Check file type
        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
        if (!validTypes.includes(file.type)) {
            alert('Please select a valid image file (JPEG, PNG, or WebP)');
            this.value = '';
            preview.style.display = 'none';
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
    } else {
        preview.style.display = 'none';
    }
});
</script>
{% endblock %}