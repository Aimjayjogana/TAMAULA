{% extends "base.html" %}

{% block title %}Match Details - TAMAULA{% endblock %}

{% block content %}
<div class="dashboard-content">
    <div class="dashboard-header">
        <h1>Match: {{ match.home_club_name }} vs {{ match.away_club_name }}</h1>
        <p>{{ match.competition_name }} - {{ match.match_date }}</p>
        <p>Status: <strong>{{ match.status|title }}</strong></p>
        {% if match.status == 'completed' %}
        <p>Final Score: <strong>{{ match.home_score }} - {{ match.away_score }}</strong></p>
        <p><strong>Date & Time:</strong> {{ match.match_date }} at {{ match.match_time if match.match_time else 'Time TBA' }}</p>
        {% endif %}
    </div>

    <div class="card">
        <h3>Match Events</h3>
        {% if events %}
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Minute</th>
                        <th>Player</th>
                        <th>Club</th>
                        <th>Event</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for event in events %}
                    <tr>
                        <td>{{ event.minute }}'</td>
                        <td>
                            {{ event.player_name }} 
                            {% if event.jersey_number %}(#{{ event.jersey_number }}){% endif %}
                        </td>
                        <td>{{ event.club_name }}</td>
                        <td>
                            <span style="color: {% if event.event_type == 'goal' %}green
                                              {% elif event.event_type == 'assist' %}blue
                                              {% elif event.event_type == 'yellow_card' %}orange
                                              {% else %}red{% endif %}; font-weight: bold;">
                                {{ event.event_type|title|replace('_', ' ') }}
                            </span>
                        </td>
                        <td>{{ event.description or '-' }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p>No events recorded for this match yet.</p>
        {% endif %}
    </div>

    <div style="margin-top: 2rem;">
        <a href="{{ url_for('club_dashboard') }}" class="btn" style="background: var(--gray);">Back to Dashboard</a>
    </div>
</div>
{% endblock %}